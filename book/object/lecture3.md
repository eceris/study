# 역할, 책임, 협력
- 애플리케이션을 구현시 어떤 `협력`이 필요하고 협력을 위해 어떤 `역할`과 `책임`이 필요한지를 고민하지 않은채 구현에 초점을 맞춘다면 **변경하기 어렵고 유연하지 못한** 코드를 만들어낸다.

## 협력

### 영화 예매 시스템 돌아보기
- 여러 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용을 협력이라 함. 
- 객체가 혐력에 참여하기 위해 수행하는 로직은 책임.
- 객체들이 협력안에서 수행하는 책임들이 모여 객체가 수행하는 역할을 구성.

### 협력
- `객체`는 시스템의 **기능**이라는 목표를 달성하기 위해 `다른 객체`와 **협력**하는 **사회적인 존재**
- 자율 적인 객체는 자신에게 할당된 책임을 수행하기에 도움이 필요한 경우 적절한 객체에게 메시지를 전송하여 협력을 요청.

### 협력이 설계를 위한 문맥을 결정한다.
- 객체의 `행동`을 결정하는 것은 객체가 참여하고 있는 `협력`
- Movie의 행동을 결정하는 것은 영화 예매를 위한 협력. 협력이 존재하기에 객체도 존재하는 것.
- 협력은 객체를 설계하는 데 필요한 일종의 **문맥**<sup>context</sup>을 제공한다.

## 책임
- 협력에 참여하기 위해 객체가 수행하는 행동을 `책임`이라고 함.
- Screening이 reserve 메시지를 수신하고 movie를 인스턴스 변수로 포함하는 이유는 협력안에서 영화를 예매할 `책임`을 수행해야 하기 때문.
- Movie가 calculateMovieFee 메시지를 수신할수 있고, fee와 discountPolicy를 속성으로 가지는 이유는 협력 안에서 가격을 계산할 `책임`을 할당 받았기 때문
- 객체에게 얼마나 적절한 `책임`을 할당하느냐가 설계의 전체적인 **품질**을 결정한다.

### 책임 할당
- 자율적인 객체를 만드는 가장 기본적은 방법은 `책임`을 수행하는데 필요한 정보를 가장 잘알고 있는 `정보전문가` 에게 그 `책임`을 **할당**하는 것.
- `예매하라` 라는 책임은 상영시간과 기본 요금을 알고 있는 정보전문가인 `Screening`에게 할당하는 것이 맞다.

### 책임 주도 설계
- 책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법.
- `협력`이 `책임`을 이끌어내고 책임이 협력에 참여할 객체를 **결정.**

### 메시지가 객체를 결정한다.
- 객체에게 `책임`을 할당하는 데 필요한 `메시지`를 먼저 **식별**하고 메시지를 처리할 객체를 **나중에** 선택했다는 것이 중요하다.
- 메시지가 객체를 선택하게 해야하는 두가지 이유가 있는데...
	- 객체가 `최소한의 인터페이스`를 가질수 있게 된다.
	- 객체는 충분히 `추상적인 인터페이스`를 가질수 있게 된다.

### 행동이 상태를 결정한다
- `상태`는 단지 객체가 행동을 정상적으로 수행하기 위해 필요한 재료일 뿐.
- 중요한 것은 `상태`가 아니라 `행동`이다. 

## 역할

### 역할과 협력
- 실제로 `협력`을 모델링 할때는 특정한 객체가 아니라 `역할`에게 `책임`을 **할당**한다고 생각하는게 좋음.
- `예매하라` 라는 메시지를 처리하기에 적합한 객체로 Screening을 선택한 것은 영화를 예매할 수 있는 적절한 `역할`을 찾고, 역할을 `수행할 객체`로 Screening 인스턴스를 선택하는 것.

### 유연하고 재사용 가능한 협력
- 역할이 중요한 이유는 역할을 통해 유연하고 재사용 가능한 협력을 얻을수 있음.
- 협력 안에서 두 종류의 객체를 교대로 바꿔 끼울 수 있는 일종의 슬롯이 바로 `역할`
- 역할은 다른 것으로 교체할 수 있는 책임의 집합.
- 사실은 추상화.

```
역할이 다양한 종류의 객체를 수용할 수 있는 일종의 슬롯이자 구체적인 객체들의 타입을 캡슐화 하는 추상화.
```

### 객체 대 역할
- 협력에 참여하는 후보가 여러 종류의 객체에 의해 수행될 필요가 있다면 그 후보는 역할, 한 종류의 객체만 협력에 참여할 필요가 있다면 후보는 `객체`가 된다.

### 역할과 추상화
- 역할을 공통의 책임을 바탕으로 객체의 종류를 숨기기때문에 역할을 객체의 추상화라고 볼 수 있음.
- 추상화의 장점은 세부사항에 억눌리지 않고 상위 수준의 정책을 쉽고 간단하게 표현할 수 있다.


