# 규칙 67. 과도한 동기화는 피하라

동기화를 너무 과도하게 적용하면 성능저하, 교착상태<sup>deadlock</sup>, 비 결정적 동작<sup>nondeterministic behavior</sup> 등의 문제가 생길 수 있다.

## 생존 오류나 안전 오류를 피하고 싶으면, 동기화 메서드나 블록 안에서 클라이언트에게 프로그램 제어 흐름을 넘기지 마라

- 동기화가 적용된 영역에서는 재정의 메서드, 클라이언트가 제공한 함수 객체 등이 불가해<sup>alien</sup> 메소드 이므로 호출하지 말라.
불가해 메서드가 무슨 일을 하는지 어떤 일을 하는지 알수 없으므로, 예외나 교착상태, 데이터 훼손<sup>data corruption</sup>이 발생할 수 있다.

## 재진입 가능 락<sup>reentrant lock</sup>은 재 진입 가능하므로, 교착 상태를 만들진 않지만 생존 오류를 안전 오류로 변모시킬수 있다.
- 이런 문제는 불가해 메서드의 호출 부분을 동기화 영역 밖으로 옮겨서 해결 할 수 있다. 이런 호출을 열린 호출<sup>open call</sup>이라고 한다.

## 동기화 영역 안에서 수행되는 작업의 양을 가능한 줄여야 한다.
- jvm이 성능을 위해 코드 최적화도 하게 되는데, 동기화 영역은 코드 최적화 하지 않는다.

> 동기화 영역 안에서 하는 작업의 양을 제한하라. 멀티 코어를 적극적으로 활용하기 위해 동기화 코드는 지양한다. 타당한 이유가 있을 때만 내부적으로 동기화하고, [어떤 결정을 내렸는지 문서에 명확하게 밝혀두라.](rule70.md)
